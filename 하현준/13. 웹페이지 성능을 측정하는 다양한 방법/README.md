## 1. 애플리케이션에서 확인하기

### create-react-app

`reportWebVitals` 함수를 통해 **누적 레이아웃 이동(CLS), 최초 입력 지연(FID), 최초 콘텐츠풀 페인트(FCP), 최대 콘텐츠 페인팅(LCP), 첫 바이트까지의 시간(TTFB)**를 측정하는 용도로 사용된다.

### create-next-app

`NextWebVitalsMetric` 메서드를 제공

**Next.js Web Vitals 공식 문서**

https://nextjs.org/docs/pages/building-your-application/optimizing/analytics#web-vitals

Next.js에 특화된 사용자 지표를 제공

- Next.js-hydration: 페이지가 서버 사이드에서 렌더링되어 하이드레이션하는 데 걸린 시간
- Next.js-route-chage-to-render: 페이지가 경로를 변경한 후 페이지를 렌더링을 시작하는 데 걸리는 시간
- Next.js-render: 경로 변경이 완료된 후 페이지를 렌더링하는 데 걸린 시간

## 2. 구글 라이트하우스

리액트 내에서 코드를 수정해야 한다는 단점이 있는 `reportWebVitals` 인 반면에 구글 라이트하우스를 사용할 경우에는 별도의 수정이나 변경이 필요없이도 측정이 가능하다.

### 탐색 모드

페이지에 접속했을 때부터 페이지 로딩이 완료될 때까지의 성능을 측정하는 모드다. 이 모드로 측정을 시작하면 페이지를 처음부터 다시 불러와서 페이지 로딩으 끝날 때까지 각각의 지표를 수집한다.

**성능**

웹페이지의 성능과 관련된 지표를 확인할 수 있는 영역

- **Time to Interactive:** 페이지에서 사용자가 완전히 상호작용할 수 있을때까지 걸리는 시간을 측정
  - 최초 콘텐츠풀 페인트로 측정되는 페이지 내 콘텐츠가 표시되는 시점
  - 보여지는 페이지 요소의 대부분에 이벤트 핸들러가 부착되는 시점
  - 페이지가 유저의 상호작용에 50ms 내로 응답하는 시점
- **Speed Index:** 페이지가 로드되는 동안 콘텐츠가 얼마나 빨리 시각적으로 표시되는지를 계산
- **Total Blocking Time:** 메인 스레드에서 특정 시간 이상 실행되는 작업, 즉 긴 작업이 수행될 때마다 메인 스레드가 차단된 것으로 간주한다.

접근성

장애인 및 고령자 등 신체적으로 불편한 사람들이 일반적인 사용자와 동등하게 웹페이지를 이용할 수 있도록 보장하는 것을 말한다.

권장사항

권장사항에는 보안, 표준 모드, 최신 라이브러리, 소스 맵 등 다양한 요소들이 포함돼 있다.

- CSP가 XSS공격에 효과적인지 확인: Content Security Policy로 웹 사이트에서 호출할 수 있는 컨텐츠를 제한하는 정책을 말한다.
- 감지된 JavaScript 라이브러리: 페이지에서 감지되는 자바스크립트 라이브러리를 말한다.
- HTTPS 사용
- 페이지 로드 시 위치정보 권한 요청 방지하기: 사용자의 동의 없이 페이지 로드 시 사용자의 물리적 위치를 알 수 있는 메서드인 `navigator.geolocation.getCurrentPosition()`, `navigator.geolocation.watchPosition()`을 실행하는지 확인한다.
- 페이지 로드 시 알림 권한 요청 방지하기
- 알려진 보안 취약점이 있는 프런트엔드 자바스크립트 라이브러리를 사용하지 않음
- 사용자가 비밀번호 입력란에 붙여넣을 수 있도록 허용
- 이미지를 올바른 가로세로 비율로 표시
- 이미지가 적절한 해상도로 제공됨
- 페이지에 HTML Doctype 있음
- 문자 집합을 제대로 정의함: 서버가 HTML 파일을 전송할 때 문자가 어떻게 인코딩돼 있는지 지정하지 않으면 브라우저는 각 바이트가 나타내는 문자를 알 수 없게 된다. 따라서 적절하게 charset을 지정해야 한다.
- 지원 중단 API 사용하지 않기
- 콘솔에 로그된 브라우저 오류 없음
- Chrome Devtools의 Issue 패널에 문제 없음
- 페이지에 유효한 소스 맵이 있음
- font-display

**검색 엔진 최적화**

웹페이지가 구글과 같은 검색엔진이 쉽게 웹페이지 정보를 가져가서 공개할 수 있도록 최적화돼 있는지를 확인하는 것을 의미한다.

### 기간 모드

기간 모드는 실제 웹페이지를 탐색하는 동안 지표를 측정하는 것이다. 기간 모드에서 볼 수 없었던 **흔적**과 **트리맵**이 기간모드에는 있다.

**흔적(View Trace)**

웹 성능을 추적한 기간을 성능 탭에서 보여준다. 상세하게 시간의 흐름에 따라 어떻게 웹페이지가 로딩됐는지를 보여준다.

**트리맵**

페이지를 불러올 때 함께 로딩한 모든 리소스를 함께 모아서 볼 수 있는 곳이다. 웹페이지 전체 자바스크립트 리소스 중 어떠한 파일이 전체 데이터 로딩 중 어느정도를 차지했는지 비율로 확인할 수 있으며, 실제 불러온 데이터의 크기를 확인할 수도 있다.

### 스냅샷

스냅샷 모드는 탐색모드와 매우 유사하지만 현재 페이지 상태를 기준으로 분석한다는 점이 다르다. 현재 상태에서 검색엔진의 최적화, 접근성, 성능 등을 분석할 수 있다.

## 3. WebPageTest

WebPageTest에서 제공하는 분석 도구는 다섯 가지로 나뉜다.

- Site Performance: 웹사이트의 성능을 분석을 위한 도구
- Core Web Vitals: 웹사이트의 핵심 웹 지표를 확인하기 위한 도구
- Lighthouse: 구글 라이트하우스 도구
- Visual Comparison: 2개 이상의 사이트를 동시에 실행해 시간의 흐름에 따른 로딩 과정을 비교하는 도구
- Traceroute: 네트워크 경로를 확인하는 도구

## 4. 크롬 개발자 도구

Docs: https://developer.chrome.com/docs/devtools/overview
