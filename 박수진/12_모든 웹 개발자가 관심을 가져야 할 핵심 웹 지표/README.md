# 12장 모든 웹 개발자가 관심을 가져야할 핵심 웹 지표

웹서비스의 성능을 객관적으로 평가할 수 있는 지표인 핵심 웹 지표에 대해 알아보고, 리액트 애플리케이션에서 측정하는 방법을 알아보자

## 12.1 웹사이트와 성능

사용자가 웹사이트에 기대하는 바

- 웹 사이트에 방문한 목적 달성
- 방문한 목적을 달성하는데 걸리는 시간이 짧아야함
- 개인정보 누출이 없이 보안이 철저해야함

사용자 입장에서는 각종 최신 기술이 집약이 되어있어도, 접근성이 떨어지고 속도나 보안 이슈가 있다면, 외면 받을 것이다. jQuery나 LAMP 같은 스택의 오래된 기술이어도 웹사이트가 충분히 빠르면 사용자는 불편함을 느끼지 않을 것이다.

구글, protent 디지털 마케팅 에이전시의 조사에 따르면 페이지 로드시간이 구매로 이어지는 전환율에 영향을 미쳤다.

개발자들이 성능에 크게 관심을 가지지 않는 이유

1. 개발자의 기기가 사용자의 평균 기기보다 성능이 뛰어남에 따라 문제를 느끼지 못하는 부분이 있고
2. 성능을 개선하는 작업이 기능 개발이나 버그 픽스에 밀릴때가 많다.

## 12.2 핵심 웹 지표란 (Core Web Vital)?

웹사이트에서 뛰어난 사용자 경험을 제공하는 데 필수적인 지표로, 구글에서 만들었다.

핵심 웹 지표

- 최대 콘텐츠풀 페인트 (LCP: Largest Contentful Paint)
- 최초 입력 지연 (FID: First Input Delay)
- 누적 레이아웃 이동 (CLS: Cumulative Layout Shift)

참고 추가 지표 
- TTFB(Time To First Byte)
- 최초 콘텐츠 풀 시간 ( FCP : First Contentful Paint)

### 12.3 최대 콘텐츠풀 페인트 (LCP: Largest Contentful Paint)
  - 사용자의 기기가 노출하는 뷰포트 내부에서 가장 큰 영역을 차지하는 요소 (이미지 또는 텍스트)가 랜더링되는 데 얼마나 걸리는지를 측정하는 지표
  - DOMContentLoaded 이벤트는 HTML 을 완전히 파싱할 때 불러오기 때문에 스타일시트, 이미지, 하위 프레임의 로딩을 기다리지 않아 사용자가 체감한 페이지 로딩과는 다르다. 사용자는 뷰포트에 메인 콘텐츠가 전달 되는것을 로딩 완료로 체감하기에 이를 판단하기 위해 만들어진 지표다.
  - LCP 는 페이지 로딩에 따라 변화하는 지표다.
  - LCP가 2.5 초 내로 응답이 오면 좋은 점수이다.

  **LCP 개선하기**
  - 텍스트는 추가 리소스가 필요한 이미지 보다 텍스트 노출이 훨씬 빠르다.
  - img 태그와 video 태그를 이용해서 이미지를 로딩하는 것이 svg 나 css 의 backgroud-image 를 이용하는 것 보다 빠른 이유는, 브라우저의 프리로드 스태너에 의해 먼저 발견되어 빠르게 요청이 일어나고, 병렬적으로 리소스를 다운로드 하기 때문에 LCP 요소를 불러오기에 적합하다.

  **추가 주의사항** 
  - 이미지 무손실 압축하기
  - loading = lazy 를 LCP 리소스로 분류
