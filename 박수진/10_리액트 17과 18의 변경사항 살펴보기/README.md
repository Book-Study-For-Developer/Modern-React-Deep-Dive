# 10장 리액트 17과 18의 변경 사항 살펴보기

2013 년 페이스북이 출시한 리액트는 11년이라는 시간이 흘렀다. 2024.2월기준 10억 다운로드를 돌파했다… 2022.8 월 18.2 버전이 릴리스 되었지만, 현재 사용되는 버전을 분석한 결과 버전 16의 비율이 높았다.

- 리액트가 더 가볍고 빠른 최신기능을 제공해 가고 있으니 팔로우 업 하면 좋다.
- 리액트 의존적인 라이브러리 ( peerDependencies 가 리액트에 의존) 가 react 최신 버전만 의존하게 되면, 해당 라이브러리를 사용하지 못할 수 있으니, 업데이트 해가는 것이 좋을 수 있다.

## 10.1 리액트 17버전 살펴보기

- 버전 16 과 다르게 새롭게 추가된 기능 없음
- 기존 코드의 수정에 필요로하는 변경사항을 최소화

### 10.1.1 리액트의 점진적인 업그레이드

- 17버전 전에는 주버전이 릴리즈 되면 이전 버전의 API 제공을 중단하며 전체 어플리케이션을 새로 업그레이드 하도록 했고, 개발자는 과거버전 머무르기 또는 현재버전 업데이트 둘중 하나를 선택해야했다.
- 17버전에는 점진적 업그레이드를 지원한다.
  - 일부 트리와 컴포넌트에 대해 다른 리액트 버전을 을 선택하는 점진적 버전업이 가능해진다.
    - 이는 버전 17 내부에서 16버전을 버전에 맞게 랜더링해주도록 되어있기 때문이다.
  → 리액트 팀은 이를 차선책으로 리액트 버전을 통일하는것이 좋다고 말한다.

### 10.1.2 이벤트 위임 방식의 변경

- 이벤트의 단계

  1. 캡처 : 이벤트 핸들러가 트리 최상단 요소 부터 시작해 이벤트 발생 타깃 요소까지 내려가는 것
  2. 타깃 : 이벤트 핸들러가 타깃 노드에 도달
  3. 버블링: 이벤트가 발생한 요소에서 다시 최상위 요소로 올라가는 것

- 이벤트 위임: 이벤트 단계의 원리를 활용해서 이벤트를 상위컴포넌트에 붙이는 것
  - li 요소들을 가지고 있는 ul 이 있고 li 에 이벤트가 필요하면, 상위 컴포넌트인 ul 에 붙이는 것
  - 리액트는 최초 release 부터 이벤트 위임을 적극적으로 사용했다.
    - 리액트 16에서는 이벤트가 각 요소가 아닌 document 에 위임된다.
      - ⁉️(이 부분을 아무리 읽어봐도 이해가 안간다. )따라서 하위 요소에서 이벤트 전파를 막는 e.stopPropagation 을 사용해도 이미 모든 이벤트가 document 에 있어서 document의 이벤트 전파는 막을 수 없다
      - 🔗[event-propagation-event-bubbling-event-catching-beginners-guide](https://www.freecodecamp.org/news/event-propagation-event-bubbling-event-catching-beginners-guide/)
    - 리액트 17 부터는 이벤트가 최상단 요소에 위임된다.
