# 1. 리액트 개발 도구란?

- `react-dev-tools`
  - 리액트로 만들어진 다양한 애플리케이션을 디버깅하기 위해 만들어진 개발 도구
  - 브라우저 확장 프로그램 사용

# 2. 리액트 개발 도구 활용하기

- 리액트 개발 도구가 정상적으로 설치됐고, 디버깅할 수 있는 페이지에 접근했다면 크롬 개발자 도구에 두 가지 메뉴가 추가된다.
  - **Components**
  - **Profiler**

## 1. 컴포넌트

- 애플리케이션의 컴포넌트 트리
- 컴포넌트의 구조와 props, 내부 `hooks` 등

### 컴포넌트 트리

![6-1](images/6-1.png)

- 리액트 애플리케이션 전체의 트리 구조를 보여준다.
- 기명 함수로 선언되어 컴포넌트명을 알 수 있다면 해당 컴포넌트명을 보여준다.
- 익명 함수로 선언돼 있다면 `Anonymous`라는 이름으로 컴포넌트를 보여준다.
  - 대표적인 예: `memo`, `forwardRef`, 고차 컴포넌트 등
  - `displayName` 속성을 추가 (개발 모드에서만 제한적으로 참고하는 것이 좋다.)

### 컴포넌트명과 props

![6-2](images/6-2.png)

- 컴포넌트 트리에서 컴포넌트를 선택했을 때 해당 컴포넌트에 대한 자세한 정보를 보여주는 영역

#### 컴포넌트명과 Key

- 컴포넌트의 명칭과 해당 컴포넌트를 나타낸다.
- 빨간색 경고: `strict mode`로 렌더링되지 않았다는 것을 의미

#### 컴포넌트 도구

![6-3](images/6-3.png)

1. **눈 아이콘:** 요소(Elements) 탭으로 즉시 이동하며, 해당 컴포넌트가 렌더링한 HTML 요소가 선택된다.
2. **벌레 아이콘:** 콘솔(Console) 탭에 해당 컴포넌트의 정보가 `console.log`를 실행해 기록된다.
   ![6-4](images/6-4.png)
3. **소스코드 아이콘:** 해당 컴포넌트의 소스코드를 확인할 수 있다.
   - 프로덕션 모드에서는 소스코드가 최대로 압축돼 있어 읽기가 어렵다. (난독화)
   - 소스(Sources) 탭 좌측 하단의 **`{}`** 아이콘을 통해 코드를 정리해 볼 수 있다.

#### 컴포넌트 props

![6-5](images/6-5.png)

- 컴포넌트가 받은 props를 확인할 수 있다.
- 마우스 우클릭을 하면 해당 props 정보를 복사하는 버튼이 나온다.
  - **Copy value to clipboard:** 클립보드로 복사된다.
  - **Store as global variable:** `window.$r`에 정보가 담긴다.
    ![6-6](images/6-6.png)
  - **Go to definition:** 값이 함수인 props를 눌렀을 때만 나타나며, 해당 함수가 선언된 코드로 이동한다.

#### 컴포넌트 hooks

![6-7](images/6-7.png)

- 컴포넌트에서 사용 중인 훅 정보를 확인할 수 있다.
- `use`가 생략된 이름으로 나타난다. (`useState` → `State`)
- 훅에 넘겨주는 함수를 익명 함수 대신 기명 함수로 넘겨주면 해당 훅을 실행할 때 실행되는 함수의 이름을 확인할 수 있다.

#### 컴포넌트를 렌더링한 주체, rendered by

![6-8](images/6-8.png)

- 해당 컴포넌트를 렌더링한 주체가 누구인지 확인할 수 있다.
- 프로덕션 모드에서는 `react-dom`의 버전만 확인할 수 있다.
- 개발 모드에서는 해당 컴포넌트를 렌더링한 부모 컴포넌트까지 확인할 수 있다.

## 2. 프로파일러

- 리액트가 렌더링하는 과정에서 발생하는 상황을 확인하기 위한 도구
  - 어떤 컴포넌트가 렌더링됐는지
  - 몇 차례 렌더링이 발생했는지
  - 어떤 작업에서 오래 걸렸는지 등
- 프로덕션 빌드에서는 사용할 수 없다.  
  → 렌더링 과정에 개입해 디버깅에 필요한 내용을 기록해야 하기 때문

### 프로파일링

#### 프로파일링 메뉴

![6-9](images/6-9.png)

1. Start Profiling: 프로파일링 시작, 누르면 적색 동그라미로 바뀌며 다시 누르면 프로파일링이 중단되고 결과가 나타난다.
2. Reload and Start profiling: 웹페이지가 새로고침됨과 동시에 프로파일링이 시작된다. 그 외는 Start Profiling과 동일하다.
3. Stop Profiling: 프로파일링된 현재 내용을 모두 지우는 버튼
4. Load Profile: 프로파일링 결과(JSON) 불러오기
5. Save Profile: 프로파일링 결과(JSON) 저장하기

#### Flamegraph

![6-10](images/6-10.png)

- 렌더 커밋별로 어떠한 작업이 일어났는지 나타낸다.
- 너비가 넓을수록 렌더링하는 데 오래 걸렸다는 것을 의미
- 렌더링되지 않은 컴포넌트도 확인할 수 있다.
  - 메모이제이션이 작동하고 있는지
  - 렌더링이 특정 상태 변화에 따라 제한적으로 발생하고 있는지
- 세로 막대 그래프를 통해 렌더 커밋별로 리액트 트리에서 발생한 렌더링 정보와 횟수를 확인할 수 있다.

#### Ranked

![6-11](images/6-11.png)

- 해당 커밋에서 렌더링하는 데 시간이 오래 걸린 컴포넌트를 순서대로 나열한 그래프
- 렌더링이 발생한 컴포넌트만 보여주기 때문에 좀 더 간결하게 원하는 정보를 파악할 수 있다.

### 타임라인

![6-12](images/6-12.png)

- 시간이 지남에 따라 컴포넌트에서 어떤 일이 일어났는지 확인할 수 있다.
- 리액트 18 이상의 환경에서만 사용할 수 있다.
